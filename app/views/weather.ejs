<html>
  <% include head %>
  <div class="container" >

    <div class="row">

      <!-- center the card in the middle. when there are other cards the offset
      on md & lg will be 2 cards per row. On sm & xs one card will be fit per
      row -->
      <div class="col-md-3"></div>


      <div class="col-md-6">

	<!-- the well gives the card a border-->
	<div class="well" style="background-color:#ffffff">
	  <!-- The table class adds nice spacing and the other classes add
	  additional style -->
	  <table class="table table-condensed">
	    <thead>
	      <tr>
		<td colspan="5">
		  <h1> <%= Math.round(((weather.temp-273)*(9/5))+32) %>&deg; in <%= weather.city %>
		  <% console.log(weather); %>
		  <img src="http://openweathermap.org/img/w/<%= weather.weather[0].icon %>.png"
		  alt="pic" style="float:right;width:150px;height:100px;" class="image-resposive"
		  width="100%">
		</h1>
		</td>

	      </tr>
	    </thead>
	    <tbody>
	      <tr>
		<% var days = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"] %>
		<% var date = new Date() %>
		<% var currentDay = date.getDay() %>

		<% for(var i=0; i<5; i++) { %>
		  <th class="text-center" > <%= days[currentDay++] %>  </td>
		  <% if (currentDay === 7) { %>
		    <% currentDay =0%>
		  <% } %>

		<% } %>



	      </tr>

	      <!--pic row -->
	      <tr>
		<% for(var i=0; i<5; i++) { %>
		  <td class="text-center">
		    <img src="http://openweathermap.org/img/w/<%= forecast[i].icon %>.png"
		    alt="pic" style="float:center;width:40px;height:40x;" class="image-resposive"
		    width="100%">
		  </td>
		<% } %>

	      </tr>

	      <!-- High -->
	      <tr>
		<% for (let i = 0; i < 5; ++i) { %>
		  <% for ( let j = 0; j < 5; ++j) { %>
		    <% if ( forecast[j].day == i+1) { %>
		      <td class="text-center"><%= Math.round(((forecast[j].max-273)*(9/5))+32) %>&deg; </td>
		    <% } %>
		  <% } %>
		<% } %>

	      </tr>

	  <!-- low -->
	  <tr>
	    <% for (let i = 0; i < 5; ++i) { %>
	      <% for ( let j = 0; j < 5; ++j) { %>
		<% if ( forecast[j].day == i+1) { %>
		  <td class="text-center"> <%= Math.round(((forecast[j].min-273)*(9/5))+32) %>&deg; </td>
		<% } %>
	      <% } %>
	    <% } %>
	  </tr>
	</tbody>
      </table>
      <% let before = (weather.updated)/1000; %>
      <% console.log(before) %>
      <% let curr = (new Date().getTime())/1000; %>
      <% console.log(before); %>
      <% console.log(curr); %>

      <% let updated  = Math.round((curr - before)/60); %>
      <p class="text-right"> Weather updated <%= updated %> time ago </p>
    </div>
  </div>
  <div class="col-md-3"></div>
</div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
</html>
